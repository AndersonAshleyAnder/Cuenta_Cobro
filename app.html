<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cuenta de Cobro - Anderson Padilla Blanco</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
  body { background: #eaeaea; font-family: "Times New Roman", Times, serif; display:flex; justify-content:center; padding:40px 0;}
  .sheet { background:#fff; width:8.5in; height:11in; box-shadow:0 0 20px rgba(0,0,0,0.25); padding:0.8in; box-sizing:border-box; }
  /* Encabezado compacto y profesional */
h1 {
  text-align: center;
  margin: 0;
  font-size: 18px;
  font-weight: bold;
  letter-spacing: 0.3px;
  padding-bottom: 2px;
}

.logo {
  text-align: center;
  margin: 2px 0; /* antes era 8px, ahora m√°s compacto */
}

.logo img {
  max-height: 80px;
  vertical-align: middle;
  display: inline-block;
  margin: 0 auto;
}

.owner {
  text-align: center;
  margin-top: 2px;
  line-height: 1.1; /* reduce espacio entre l√≠neas */
  font-size: 14px;
}

  .info-client { margin-top:10px; border-top:1px solid #000; padding-top:5px; line-height:1.2; }
  .info-client p { margin:2px 0; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
  label { font-weight:bold; min-width:70px; }
  input, select { border:none; border-bottom:1px solid #000; font-family:"Times New Roman", Times, serif; font-size:14px; padding:2px 4px; }
  .client-actions button { background:none; border:none; cursor:pointer; font-size:16px; }
  table { width:100%; border-collapse:collapse; margin-top:12px; font-size:14px; }
  th, td { border:0.5px solid #000; padding:6px; vertical-align:top; }
  th { text-align:center; font-weight:bold; background:#f9f9f9; }
  td:nth-child(1) { text-align:center; width:10%; }
  td:nth-child(3), td:nth-child(4) { text-align:right; width:15%; }
  td:nth-child(2) { width:60%; word-wrap:break-word; }
  td input { border:none; width:100%; font-size:14px; font-family:inherit; padding:2px; }
  td input:focus { outline:none; }
  .total-row td { font-weight:bold; text-align:right; }
  .pay-note { margin-top:18px; line-height:1.3; }
  .blank-space { height:200px; }
  .signature { text-align:center; margin-top:20px; }
  .sig-line { width:250px; border-top:1px solid #000; margin:0 auto 5px; }
  .controls { text-align:center; margin-top:20px; }
  button { background:#000; color:#fff; border:none; padding:8px 14px; border-radius:3px; cursor:pointer; }
  button:hover { opacity:0.85; }
  /* Modal general */
  #historialModal, #detalleModal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; z-index:999; }
  .modal-contenido { background:#fff; width:90%; max-width:800px; border-radius:8px; padding:20px; box-shadow:0 0 10px rgba(0,0,0,0.4); max-height:90vh; overflow-y:auto; }
  .modal-contenido h2 { text-align:center; margin-top:0; }
  .close-btn { float:right; cursor:pointer; color:red; font-weight:bold; }
  table.modal-table { width:100%; border-collapse:collapse; }
  table.modal-table th, table.modal-table td { border:1px solid #000; padding:6px; text-align:left; }
  .info-client p label + span {
  margin-left: 0 !important;
  flex: 1;
}
</style>
	
</head>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyATzJRDR7EgnsL6-kOY1Qu_rxnRFuUGpc0",
    authDomain: "cuentacobroapb.firebaseapp.com",
    projectId: "cuentacobroapb"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  // üîí Protecci√≥n CORRECTA (sin login infinito)
  document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
      const user = firebase.auth().currentUser;
      if (!user) {
        window.location.replace("index.html");
      }
    }, 800);
  });
</script>


<body>

<div class="sheet" id="captureArea">
  <h1>Cuenta de Cobro <span id="numCuenta">APB001</span></h1>
  <div class="logo">
  <img src="data:image/png;base64,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" alt="Logo" style="max-height:80px;">
</div>
  <div class="owner"><strong>Tecn√≥logo Gesti√≥n de Redes</strong><br>RUT: 1047464140-6</div>

  <div class="info-client">
    <p>
      <label>Cliente:</label>
      <select id="listaClientes" onchange="seleccionarCliente()"><option value="">-- Nuevo cliente --</option></select>
      <span class="client-actions" id="accionesCliente">
        <button onclick="editarCliente()">‚úèÔ∏è</button>
        <button onclick="eliminarCliente()">üóëÔ∏è</button>
      </span>
      <input id="cliente" placeholder="Nombre del cliente">
    </p>
    <p><label>NIT:</label><input id="nit" placeholder="NIT o CC"></p>
    <p><label>Tel√©fono:</label><input id="telefono" placeholder="Tel√©fono"></p>
    <p><label>Direcci√≥n:</label><input id="direccion" placeholder="Direcci√≥n"></p>
    <p><label>Fecha:</label><input type="date" id="fecha"></p>
  </div>

  <table id="tablaItems">
    <thead><tr><th>Cant</th><th>Descripci√≥n</th><th>Vr. Unit</th><th>Vr. Total</th></tr></thead>
    <tbody>
      <tr>
        <td><input type="number" value="1" onchange="actualizarTotal()"></td>
        <td><input placeholder="Descripci√≥n del servicio" onchange="actualizarTotal()"></td>
        <td><input type="number" value="0" onchange="actualizarTotal()"></td>
        <td class="vrTotal">$ 0</td>
      </tr>
    </tbody>
    <tfoot><tr class="total-row"><td colspan="3">TOTAL:</td><td id="totalGeneral">$ 0</td></tr></tfoot>
  </table>

  <div class="controls" id="botonesEdicion">
    <button onclick="agregarItem()">Agregar √≠tem</button>
    <button onclick="eliminarUltimo()">Eliminar √≠tem</button>
  </div>

  <div class="pay-note">
    <p>Consignar en Cuenta de Ahorros BBVA # 423341494 o Nequi 3016646217</p>
    <p>NOTA: No se practica retenci√≥n en la fuente por no superar el monto m√≠nimo establecido en el art√≠culo 383 del Estatuto Tributario y normas reglamentarias vigentes.</p>
  </div>

  <div class="blank-space"></div>
  <div class="signature">
    <div class="sig-line"></div>
    <div>ANDERSON PADILLA BLANCO</div>
	<div>RUT 1047464140-6</div>
  </div>
</div>

<div class="controls">
  <button onclick="generarPDF()">Generar PDF</button>
  <button onclick="mostrarHistorial()">üìÑ Ver historial</button>
  <button onclick="cambiarConsecutivo()">‚úèÔ∏è Cambiar consecutivo</button>
  <button onclick="cerrarSesion()">Cerrar sesi√≥n</button>
</div>

<!-- Modal Historial -->
<div id="historialModal">
  <div class="modal-contenido">
    <span class="close-btn" onclick="cerrarHistorial()">‚úñ</span>
    <h2>Historial de Cuentas</h2>
    <table class="modal-table" id="tablaHistorial">
      <thead><tr><th>#</th><th>Cuenta</th><th>Cliente</th><th>Fecha</th><th>Total</th><th>Ver</th></tr></thead>
      <tbody></tbody>
    </table>
    <div class="controls"><button onclick="borrarHistorial()">üóëÔ∏è Borrar historial</button></div>
  </div>
</div>

<!-- Modal Detalle -->
<div id="detalleModal">
  <div class="modal-contenido">
    <span class="close-btn" onclick="cerrarDetalle()">‚úñ</span>
    <h2>Detalle de la Cuenta</h2>
    <div id="detalleContenido"></div>
  </div>
</div>

<script>
/* ---------- Inicializaci√≥n ---------- */
let consecutivo = parseInt(localStorage.getItem('consecutivoCuenta')) || 1;
const numCuenta = document.getElementById('numCuenta');
function actualizarNumero(){ numCuenta.textContent = "APB" + String(consecutivo).padStart(3,'0'); }
actualizarNumero();

let clientes = JSON.parse(localStorage.getItem('clientesGuardados')) || [];
let historial = JSON.parse(localStorage.getItem('historialCuentas')) || [];
const selectClientes = document.getElementById('listaClientes');
const inputCliente = document.getElementById('cliente');

function cargarClientes(){
  selectClientes.innerHTML = '<option value="">-- Nuevo cliente --</option>';
  clientes.forEach(c => {
    const o = document.createElement('option');
    o.value = c.nombre; o.textContent = c.nombre;
    selectClientes.appendChild(o);
  });
}
cargarClientes();

/* ---------- Helpers para clientes (no tocar en otros sitios) ---------- */
function saveClientRecord(name, nit, telefono, direccion){
  name = (name||'').trim();
  if(!name) return; // no guardar si no hay nombre
  const rec = { nombre: name, nit: (nit||'').trim(), telefono: (telefono||'').trim(), direccion: (direccion||'').trim() };
  const exist = clientes.find(c => c.nombre === rec.nombre);
  if(exist){
    Object.assign(exist, rec);
  } else {
    clientes.push(rec);
  }
  localStorage.setItem('clientesGuardados', JSON.stringify(clientes));
  cargarClientes();
}
function cambiarConsecutivo() {
  let nuevo = prompt("Ingrese el n√∫mero de consecutivo que desea usar (solo el n√∫mero):");
  if (!nuevo || isNaN(nuevo)) return alert("Valor no v√°lido. Debe ser un n√∫mero.");
  localStorage.setItem('consecutivoCuenta', parseInt(nuevo));
  consecutivo = parseInt(nuevo);
  actualizarNumero();
  alert(`Consecutivo cambiado a APB${String(consecutivo).padStart(3,'0')}`);
}

/* ---------- Clientes UI ---------- */
function seleccionarCliente(){
  const n = selectClientes.value;
  if(!n){ ['cliente','nit','telefono','direccion'].forEach(i => document.getElementById(i).value=''); return; }
  const c = clientes.find(x => x.nombre === n);
  if(c){
    document.getElementById('cliente').value = c.nombre;
    document.getElementById('nit').value = c.nit || '';
    document.getElementById('telefono').value = c.telefono || '';
    document.getElementById('direccion').value = c.direccion || '';
  }
}
function editarCliente(){
  const n = selectClientes.value;
  if(!n) return alert("Selecciona un cliente.");
  const c = clientes.find(x => x.nombre === n);
  if(c){
    ['cliente','nit','telefono','direccion'].forEach(i => document.getElementById(i).value = c[i] || '');
    alert("Edita los campos y luego genera el PDF para guardar los cambios.");
  }
}
function eliminarCliente(){
  const n = selectClientes.value;
  if(!n) return alert("Selecciona un cliente.");
  if(!confirm(`¬øEliminar al cliente "${n}"?`)) return;
  clientes = clientes.filter(c => c.nombre !== n);
  localStorage.setItem('clientesGuardados', JSON.stringify(clientes));
  cargarClientes(); limpiarFormulario(); alert("Cliente eliminado.");
}

/* ---------- Items y Totales ---------- */
function agregarItem(){
  const t = document.querySelector('#tablaItems tbody');
  const r = document.createElement('tr');
  r.innerHTML = `<td><input type="number" value="1" onchange="actualizarTotal()"></td>
    <td><input placeholder="Descripci√≥n" onchange="actualizarTotal()"></td>
    <td><input type="number" value="0" onchange="actualizarTotal()"></td>
    <td class="vrTotal">$ 0</td>`;
  t.appendChild(r);
}
function eliminarUltimo(){
  const t = document.querySelector('#tablaItems tbody');
  if(t.rows.length>0) t.deleteRow(-1);
  actualizarTotal();
}
function actualizarTotal(){
  let total = 0;
  document.querySelectorAll('#tablaItems tbody tr').forEach(tr=>{
    const c = Number(tr.children[0].children[0].value) || 0;
    const u = Number(tr.children[2].children[0].value) || 0;
    const s = c * u;
    tr.querySelector('.vrTotal').textContent = `$ ${s.toLocaleString('es-CO')}`;
    total += s;
  });
  document.getElementById('totalGeneral').textContent = `$ ${total.toLocaleString('es-CO')}`;
}

/* ---------- fallback PDF simple (texto) ---------- */
function generarPdfSimple(registro){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p','pt','letter');
  pdf.setFont('Times','');
  pdf.setFontSize(12);
  let y = 40;
  pdf.text(`Cuenta: ${registro.numero}`, 40, y); y += 20;
  pdf.text(`Cliente: ${registro.cliente}`, 40, y); y += 18;
  pdf.text(`NIT: ${registro.nit}`, 40, y); y += 18;
  pdf.text(`Tel√©fono: ${registro.telefono}`, 40, y); y += 18;
  pdf.text(`Direcci√≥n: ${registro.direccion}`, 40, y); y += 24;
  pdf.text(`Fecha: ${registro.fecha}`, 40, y); y += 24;
  pdf.text('Items:', 40, y); y += 18;
  registro.items.forEach(it => {
    pdf.text(`- ${it.cantidad}  ${it.descripcion}  Unit: $ ${(Number(it.unitario)||0).toLocaleString('es-CO')}  Total: ${it.total}`, 45, y);
    y += 16;
    if(y > 720){ pdf.addPage(); y = 40; }
  });
  y += 12;
  pdf.text(`TOTAL: ${registro.total}`, 40, y);
  const fileCliente = (registro.cliente || 'Cliente').replace(/[^a-zA-Z0-9]/g,'_');
  pdf.save(`CuentaCobro_${registro.numero}_${fileCliente}_simple.pdf`);
}

/* ---------- generar PDF (robusto con try/catch y fallback) ---------- */
async function generarPDF(){
  // ocultar controles que no queremos en el PDF
  const botones = document.querySelectorAll('.controls');
  const acciones = document.getElementById('accionesCliente');
  botones.forEach(b => b.style.display = 'none');
  if(acciones) acciones.style.display = 'none';

  // resolver nombre del cliente (input primero, si vac√≠o -> select option text)
  let clienteNombre = (inputCliente.value || '').trim();
  if(!clienteNombre && selectClientes && selectClientes.selectedIndex > 0){
    clienteNombre = selectClientes.options[selectClientes.selectedIndex].text.trim();
  }
  if(!clienteNombre && selectClientes && selectClientes.value){
    clienteNombre = selectClientes.value.trim();
  }

  // Guardar cliente en storage ANTES de limpiar (si hay datos)
  const nitVal = document.getElementById('nit').value.trim();
  const telVal = document.getElementById('telefono').value.trim();
  const dirVal = document.getElementById('direccion').value.trim();
  if(clienteNombre) saveClientRecord(clienteNombre, nitVal, telVal, dirVal);

  // insertar span con nombre (para que salga en el PDF; colocaci√≥n junto a label Cliente:)
  let spanCliente = document.createElement('span');
  spanCliente.textContent = clienteNombre;
  spanCliente.style.marginLeft = '6px';
  spanCliente.style.fontWeight = 'normal';
  const labels = document.querySelectorAll('.info-client label');
  let labelCliente = null;
  labels.forEach(l => { if(l.textContent.trim().toLowerCase().startsWith('cliente')) labelCliente = l; });
  if(labelCliente){
    const nextEl = labelCliente.nextElementSibling;
    labelCliente.parentNode.insertBefore(spanCliente, nextEl);
  } else {
    if(selectClientes) selectClientes.parentNode.insertBefore(spanCliente, selectClientes);
  }

  if(selectClientes) selectClientes.style.display = 'none';
  if(inputCliente) inputCliente.style.display = 'none';

  // --- tomar datos REALES de los √≠tems antes de ocultar inputs ---
  const items = [...document.querySelectorAll('#tablaItems tbody tr')].map(tr => {
    const cEl = tr.children[0].querySelector('input');
    const dEl = tr.children[1].querySelector('input');
    const uEl = tr.children[2].querySelector('input');
    const cantidad = cEl ? cEl.value : tr.children[0].textContent.trim();
    const descripcion = dEl ? dEl.value : tr.children[1].textContent.trim();
    const unitario = uEl ? uEl.value : tr.children[2].textContent.trim();
    const total = tr.querySelector('.vrTotal') ? tr.querySelector('.vrTotal').textContent.trim() : '';
    return { cantidad: cantidad || '0', descripcion: descripcion || '', unitario: unitario || '0', total };
  });

  // reemplazar inputs por spans para captura visual (unitario con formato)
  const area = document.getElementById('captureArea');
  const inputs = area.querySelectorAll('input');
  const snaps = [];
  inputs.forEach(inp => {
    if(inp.id === "cliente") return;
    const span = document.createElement('span');
    let val = inp.value;
    if(inp.type === "number" && inp.closest('#tablaItems')){
      if(inp.parentNode.cellIndex === 2){
        val = `$ ${(Number(val)||0).toLocaleString('es-CO')}`;
      }
    }
    span.textContent = val;
    span.style.display = 'block';
    span.style.whiteSpace = 'pre-wrap';
    span.style.wordBreak = 'break-word';
    inp.style.display = 'none';
    inp.parentNode.insertBefore(span, inp);
    snaps.push({ inp, span });
  });

  // preparar registro (usar para historial y posible fallback)
  const registro = {
    numero: numCuenta.textContent,
    cliente: clienteNombre,
    nit: nitVal,
    telefono: telVal,
    direccion: dirVal,
    fecha: document.getElementById('fecha').value || new Date().toISOString().slice(0,10),
    total: document.getElementById('totalGeneral').textContent,
    items
  };

  // intentar captura visual; si falla, usar fallback textual
  try {
    const canvas = await html2canvas(area, { scale: 2 }); // removido useCORS para evitar errores con imagen local
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF('p', 'pt', 'letter');
    const w = pdf.internal.pageSize.getWidth();
    const h = (canvas.height * w) / canvas.width;
    pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, w, h);

    let fileCliente = clienteNombre || "Cliente";
    fileCliente = fileCliente.replace(/[^a-zA-Z0-9]/g, "_");
    pdf.save(`CuentaCobro_${numCuenta.textContent}_${fileCliente}.pdf`);
  } catch (err) {
    console.error('Error en html2canvas -> fallback simple PDF', err);
    // fallback: generar PDF simple con texto
    generarPdfSimple(registro);
    alert('La captura visual fall√≥. Se cre√≥ un PDF alternativo en texto.');
  }

  // guardar en historial (Usamos los items capturados antes)
  historial.push(registro);
  localStorage.setItem('historialCuentas', JSON.stringify(historial));

  // restaurar inputs (eliminar spans temporales)
  snaps.forEach(s => { s.inp.style.display = ''; s.span.remove(); });
  if(spanCliente) spanCliente.remove();
  if(selectClientes) selectClientes.style.display = '';
  if(inputCliente) inputCliente.style.display = '';
  botones.forEach(b => b.style.display = 'block');
  if(acciones) acciones.style.display = 'inline-flex';

  // incrementar consecutivo y actualizar
  consecutivo++;
  localStorage.setItem('consecutivoCuenta', consecutivo);
  actualizarNumero();

  // limpiar formulario para la siguiente cuenta (y el cliente ya fue guardado arriba)
  limpiarFormulario();
}

/* ---------- Historial y detalle ---------- */
function mostrarHistorial(){
  const modal = document.getElementById('historialModal');
  const tbody = document.querySelector('#tablaHistorial tbody');
  tbody.innerHTML = '';
  historial.forEach((c,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${i+1}</td><td>${c.numero}</td><td>${c.cliente}</td><td>${c.fecha}</td><td>${c.total}</td>
      <td><button onclick="verDetalle(${i})">üëÅÔ∏è</button></td>`;
    tbody.appendChild(tr);
  });
  modal.style.display = 'flex';
}
function cerrarHistorial(){ document.getElementById('historialModal').style.display = 'none'; }
function borrarHistorial(){ if(confirm("¬øEliminar todo el historial?")){ historial=[]; localStorage.removeItem('historialCuentas'); mostrarHistorial(); } }
function verDetalle(i){
  const c = historial[i];
  const d = document.getElementById('detalleContenido');
  d.innerHTML = `<p><b>Cuenta:</b> ${c.numero}</p>
    <p><b>Cliente:</b> ${c.cliente}</p><p><b>NIT:</b> ${c.nit}</p>
    <p><b>Tel√©fono:</b> ${c.telefono}</p><p><b>Direcci√≥n:</b> ${c.direccion}</p><p><b>Fecha:</b> ${c.fecha}</p>
    <table class="modal-table"><thead><tr><th>Cant</th><th>Descripci√≥n</th><th>Vr. Unit</th><th>Vr. Total</th></tr></thead>
    <tbody>${c.items.map(it => `<tr><td>${it.cantidad}</td><td>${it.descripcion}</td><td>$ ${(Number(it.unitario)||0).toLocaleString('es-CO')}</td><td>${it.total}</td></tr>`).join('')}</tbody></table>
    <p><b>Total:</b> ${c.total}</p>`;
  document.getElementById('detalleModal').style.display = 'flex';
}
function cerrarDetalle(){ document.getElementById('detalleModal').style.display = 'none'; }

/* ---------- Utilidades ---------- */
function limpiarFormulario(){
  ['cliente','nit','telefono','direccion'].forEach(id => {
    const el = document.getElementById(id);
    if(el) el.value = '';
  });
  selectClientes.value = '';
  const tbody = document.querySelector('#tablaItems tbody');
  tbody.innerHTML = `<tr>
    <td><input type="number" value="1" onchange="actualizarTotal()"></td>
    <td><input placeholder="Descripci√≥n del servicio" onchange="actualizarTotal()"></td>
    <td><input type="number" value="0" onchange="actualizarTotal()"></td>
    <td class="vrTotal">$ 0</td>
  </tr>`;
  actualizarTotal();
}
function guardarCliente(){
  const name = document.getElementById('cliente').value.trim();
  if(!name) return;
  const nit = document.getElementById('nit').value.trim();
  const tel = document.getElementById('telefono').value.trim();
  const dir = document.getElementById('direccion').value.trim();
  saveClientRecord(name, nit, tel, dir);
}
</script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyATzJRDR7EgnsL6-kOY1Qu_rxnRFuUGpc0",
    authDomain: "cuentacobroapb.firebaseapp.com",
    projectId: "cuentacobroapb"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  let authResolved = false;

  firebase.auth().onAuthStateChanged(user => {
    if (authResolved) return;
    authResolved = true;

    setTimeout(() => {
      if (!user) {
        window.location.replace("index.html");
      }
    }, 200);
  });
</script>
	<script>
function cerrarSesion() {
  alert("Funci√≥n cerrarSesion ejecutada");
}
</script>


</body>
</html>
